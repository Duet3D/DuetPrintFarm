(function(e){function t(t){for(var r,i,s=t[0],c=t[1],u=t[2],d=0,p=[];d<s.length;d++)i=s[d],Object.prototype.hasOwnProperty.call(a,i)&&a[i]&&p.push(a[i][0]),a[i]=0;for(r in c)Object.prototype.hasOwnProperty.call(c,r)&&(e[r]=c[r]);l&&l(t);while(p.length)p.shift()();return o.push.apply(o,u||[]),n()}function n(){for(var e,t=0;t<o.length;t++){for(var n=o[t],r=!0,s=1;s<n.length;s++){var c=n[s];0!==a[c]&&(r=!1)}r&&(o.splice(t--,1),e=i(i.s=n[0]))}return e}var r={},a={app:0},o=[];function i(t){if(r[t])return r[t].exports;var n=r[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,i),n.l=!0,n.exports}i.m=e,i.c=r,i.d=function(e,t,n){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},i.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)i.d(n,r,function(t){return e[t]}.bind(null,r));return n},i.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="/";var s=window["webpackJsonp"]=window["webpackJsonp"]||[],c=s.push.bind(s);s.push=t,s=s.slice();for(var u=0;u<s.length;u++)t(s[u]);var l=c;o.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("56d7")},"452c":function(e,t,n){},"56d7":function(e,t,n){"use strict";n.r(t);n("e260"),n("e6cf"),n("cca6"),n("a79d");var r=n("2b0e"),a=n("5f5b"),o=n("b1e0"),i=(n("ab8b"),n("2dd8"),function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("b-button",{directives:[{name:"b-modal",rawName:"v-b-modal.modal-add-printer",modifiers:{"modal-add-printer":!0}}],attrs:{size:"sm",variant:"success"}},[n("b-icon",{attrs:{icon:"plus"}}),e._v(" Add Printer ")],1),n("b-modal",{attrs:{id:"modal-add-printer",title:"Add Printer","ok-disabled":""==e.hostname},on:{ok:e.ok}},[n("p",[e._v("Please enter the hostname of the new printer:")]),n("b-form-input",{attrs:{placeholder:"Hostname or IP address"},model:{value:e.hostname,callback:function(t){e.hostname=t},expression:"hostname"}})],1)],1)}),s=[],c=n("1da1"),u=(n("96cf"),n("99af"),n("d3b7"),4e3),l="".concat(location.protocol,"//").concat(location.host,"/");function d(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:u,o=l+t;if(n){var i=!1;for(var s in n)o+=(i?"&":"?")+s+"="+encodeURIComponent(n[s]),i=!0}var c=new XMLHttpRequest;return c.open(e,o),c.responseType="text",c.setRequestHeader("Content-Type","application/json"),c.timeout=a,new Promise((function(e,t){c.onload=function(){if(c.status>=200&&c.status<300)try{c.responseText?e(JSON.parse(c.responseText)):e(null)}catch(n){t(n)}else 0!==c.status?t(new Error("Server returned HTTP code ".concat(c.status," ").concat(c.statusText))):t(new Error("HTTP request failed"))},c.onabort=function(){t(new Error("Request aborted"))},c.onerror=function(){t(new Error("HTTP request failed"))},c.ontimeout=function(){t(new Error("HTTP request timed out"))},c.send(r)}))}function p(){return d("GET","printFarm/queue")}function f(){return d("GET","printFarm/printers")}function m(e){return d("PUT","printFarm/printer",{hostname:e})}function b(e){return d("DELETE","printFarm/printer",{hostname:e})}function h(e,t){var n=t instanceof Blob?t:new Blob([t]);return d("PUT","printFarm/job",{filename:e},n,0)}function v(e){return d("DELETE","printFarm/job",{index:e})}var g={data:function(){return{hostname:""}},methods:{ok:function(){var e=this;return Object(c["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,m(e.hostname);case 3:e.hostname="",t.next=9;break;case 6:t.prev=6,t.t0=t["catch"](0),alert("Failed to add printer:\n\n".concat(t.t0.message));case 9:case"end":return t.stop()}}),t,null,[[0,6]])})))()}}},w=g,y=n("2877"),x=Object(y["a"])(w,i,s,!1,null,null,null),k=x.exports,T=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("b-button",{attrs:{loading:e.isBusy,size:"sm",variant:"primary"},on:{click:e.chooseFile}},[n("b-icon",{attrs:{icon:"cloud-upload"}}),e._v(" Upload File "),n("input",{ref:"fileInput",attrs:{type:"file",accept:".g,.gcode,.gc,.gco,.nc,.ngc,.tap",hidden:""},on:{change:e.fileSelected}})],1)},j=[],_=(n("b0c0"),{data:function(){return{isBusy:!1}},methods:{chooseFile:function(){this.isBusy||this.$refs.fileInput.click()},fileSelected:function(e){return Object(c["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!(e.target.files.length>0)){t.next=11;break}return t.prev=1,console.log(e.target.files[0]),t.next=5,h(e.target.files[0].name,e.target.files[0]);case 5:t.next=10;break;case 7:t.prev=7,t.t0=t["catch"](1),alert("Upload failed!\n\n"+t.t0.message);case 10:e.target.value="";case 11:case"end":return t.stop()}}),t,null,[[1,7]])})))()}}}),F=_,P=Object(y["a"])(F,T,j,!1,null,null,null),O=P.exports;r["default"].component("add-printer-button",k),r["default"].component("upload-button",O);var E=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{attrs:{id:"app"}},[n("b-container",{staticClass:"mt-3"},[n("h1",{staticClass:"mb-3 text-center"},[e._v(" Print Farm Overview ")]),n("b-alert",{attrs:{show:!!e.errorMessage,variant:"warning"}},[n("b-icon",{attrs:{icon:"exclamation-triangle"}}),e._v(" "+e._s(e.errorMessage)+" ")],1),n("b-card",{attrs:{"no-body":""},scopedSlots:e._u([{key:"header",fn:function(){return[n("span",[n("b-icon",{attrs:{icon:"card-list"}}),e._v(" Job Queue ")],1),n("upload-button")]},proxy:!0}])},[n("b-table",{staticClass:"mb-0 job-table",attrs:{striped:"",hover:"",fields:e.jobFields,items:e.jobs},scopedSlots:e._u([{key:"cell(Delete)",fn:function(t){return[n("b-button",{directives:[{name:"show",rawName:"v-show",value:!t.item.Hostname||!!t.item.TimeCompleted,expression:"!data.item.Hostname || !!data.item.TimeCompleted"}],attrs:{size:"sm",variant:"danger"},on:{click:function(n){return e.deleteFile(t.index)}}},[n("b-icon",{attrs:{icon:"trash"}}),e._v(" Delete ")],1)]}}])})],1),n("b-card",{staticClass:"mt-3",attrs:{"no-body":""},scopedSlots:e._u([{key:"header",fn:function(){return[n("span",[n("b-icon",{attrs:{icon:"printer"}}),e._v(" Printer Management ")],1),n("add-printer-button")]},proxy:!0}])},[n("b-table",{staticClass:"mb-0 printer-table",attrs:{striped:"",hover:"",fields:e.printerFields,items:e.printers},scopedSlots:e._u([{key:"cell(Delete)",fn:function(t){return[n("b-button",{attrs:{size:"sm",variant:"danger"},on:{click:function(n){return e.deletePrinter(t.item.Hostname)}}},[n("b-icon",{attrs:{icon:"trash"}}),e._v(" Delete ")],1)]}}])})],1)],1)],1)},S=[];n("b680"),n("25f0"),n("a15b");function M(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(null===e||isNaN(e))return"n/a";e=Math.round(e),e<0&&(e=0);var n,r=[];return e>=3600&&(n=Math.floor(e/3600),n>0&&(r.push(n+"h"),e%=3600)),e>=60&&(n=Math.floor(e/60),n>0&&(r.push((e>9||!t?n:"0"+n)+"m"),e%=60)),e=e.toFixed(0),r.push((e>9||!t?e:"0"+e)+"s"),r.join(" ")}var R={data:function(){return{errorMessage:null,jobFields:[{key:"Filename",sortable:!0},{key:"Hostname",sortable:!0},{key:"TimeCreated",formatter:function(e){return e?new Date(e).toLocaleString():"n/a"},sortable:!0},{key:"Progress",formatter:function(e,t,n){return n.TimeCompleted?"100 %":e?"".concat((100*e).toFixed(1)," %"):"n/a"},sortable:!0},{key:"TimeLeft",formatter:function(e){return M(e)},sortable:!0},{key:"TimeCompleted",formatter:function(e){return e?new Date(e).toLocaleString():"n/a"},sortable:!0},{key:"Delete",label:"",sortable:!1}],jobs:[],printerFields:[{key:"Hostname",sortable:!0},{key:"Online",formatter:function(e){return e?"Yes":"No"},sortable:!0},{key:"JobFile",formatter:function(e){return e||"none"},sortable:!0},{key:"Delete",label:"",sortable:!1}],printers:[]}},mounted:function(){this.updateLoop()},methods:{updateLoop:function(){var e=this;return Object(c["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,p();case 3:return e.jobs=t.sent,t.next=6,f();case 6:e.printers=t.sent,e.errorMessage=null,t.next=13;break;case 10:t.prev=10,t.t0=t["catch"](0),e.errorMessage=t.t0.toString();case 13:setTimeout(e.updateLoop,1e3);case 14:case"end":return t.stop()}}),t,null,[[0,10]])})))()},deleteFile:function(e){var t=this;return Object(c["a"])(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,v(e);case 3:return n.next=5,p();case 5:t.jobs=n.sent,n.next=11;break;case 8:n.prev=8,n.t0=n["catch"](0),alert("Failed to delete file!\n\n".concat(n.t0.message));case 11:case"end":return n.stop()}}),n,null,[[0,8]])})))()},deletePrinter:function(e){var t=this;return Object(c["a"])(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,b(e);case 3:return n.next=5,f();case 5:t.printers=n.sent,n.next=11;break;case 8:n.prev=8,n.t0=n["catch"](0),alert("Failed to delete printer!\n\n".concat(n.t0.message));case 11:case"end":return n.stop()}}),n,null,[[0,8]])})))()}}},C=R,H=(n("c6d3"),n("b0a0"),Object(y["a"])(C,E,S,!1,null,"386e8998",null)),D=H.exports;r["default"].config.productionTip=!1,r["default"].use(a["a"]),r["default"].use(o["a"]),new r["default"]({el:"#app",render:function(e){return e(D)}})},b0a0:function(e,t,n){"use strict";n("452c")},c6d3:function(e,t,n){"use strict";n("d30d")},d30d:function(e,t,n){}});
//# sourceMappingURL=app.01430bbb.js.map